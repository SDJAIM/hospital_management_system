<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <!-- list View -->
        <record id="view_appointment_list" model="ir.ui.view">
            <field name="name">hospital.appointment.list</field>
            <field name="model">hospital.appointment</field>
            <field name="arch" type="xml">
                <list string="Appointment List" decoration-danger="state == 'cancelled'" decoration-success="state == 'done'">
                    <field name="patient_id" optional="show"/>
                    <field name="doctor_id" optional="show"/>
                    <field name="appointment_date" optional="show"/>
                    <field name="appointment_slot" optional="show"/>
                    <field name="state" optional="show"/>
                    <field name="insurance_number" optional="show"/>
                </list>
            </field>
        </record>

        <!-- Form View -->
        <record id="view_appointment_form" model="ir.ui.view">
            <field name="name">hospital.appointment.form</field>
            <field name="model">hospital.appointment</field>
            <field name="arch" type="xml">
                <form string="Appointment Form">
                     <!-- Status Bar -->
                     <header>
                          <!-- Action Buttons (always visible in Odoo 17) -->
                            <button name="action_submit_for_approval" type="object" string="Submit for Approval" invisible="state != 'draft'" class="oe_highlight"/>
                            <button name="action_confirm" type="object" string="Confirm" invisible="state != 'pending'" class="oe_highlight"/>
                            <button name="action_ongoing" type="object" string="Ongoing" invisible="state != 'confirmed'" class="oe_highlight"/>
                            <button name="action_done" type="object" string="Done" invisible="state != 'ongoing'" class="oe_highlight"/>
                            <button name="action_cancel" type="object" string="Cancelled" invisible="state == 'done'"/>
                            <field  name="state" widget="statusbar" statusbar_visible="draft,pending,confirmed,ongoing,done,cancelled"
                            options="{'clickable':'1'}"/>
                        </header>
                    <sheet>
                        <!--div class="oe_button_box" name="button_box">
                            <button name="action_confirm" string="Confirm" type="object" class="btn btn-primary"
                            />
                            <button name="action_done" string="Mark Done" type="object" class="btn btn-success"/>
                            <button name="action_cancel" string="Cancel" type="object" class="btn btn-danger"/>

                            </div-->

                        <!-- Form Fields -->
                        <group>
                            <field name="patient_id"/>
                            <field name="doctor_id"/>
                            <field name="appointment_date"/>
                            <field name="appointment_slot" readonly="1"/>
                        </group>
                        <group>
                            <field name="reason"/>
                            <field name="fee"/>
                            <field name="insurance_docs" filename="insurance_number"/>
                            <field name="insurance_number" attrs="{'invisible': [('insurance_docs', '=', False)]}"/>
                        </group>
                        <group>
                            <field name="secretary_notes" attrs="{'readonly': [('state', '!=', 'pending')]}"/>
                        </group>
                      <div class="oe_button_box" name="buttons" style="margin-top: 20px; text-align: center;">
                          <button name="action_go_back"
                                    type="object"
                                    string="Back"
                                    class="btn-secondary"
                                    style="padding: 10px 20px; font-size: 20px;"/>

                            <button name="action_save_appointment"
                                    type="object"
                                    string="Save"
                                    class="btn-primary"
                                    style="margin-right: 10px; padding: 10px 20px; font-size: 20px;"/>


                        </div>


                    </sheet>
                </form>
            </field>
        </record>

        <!-- Action -->
        <record id="action_appointment" model="ir.actions.act_window">
            <field name="name">Appointments</field>
            <field name="res_model">hospital.appointment</field>
            <field name="view_mode">calendar,tree,form</field>
        </record>

        <!-- Calendar View -->
        <record id="view_appointment_calendar" model="ir.ui.view">
            <field name="name">hospital.appointment.calendar</field>
            <field name="model">hospital.appointment</field>
            <field name="arch" type="xml">
                <calendar string="Appointments" date_start="appointment_date" color="doctor_id">
                    <field name="patient_id"/>
                    <field name="doctor_id"/>
                    <field name="state"/>
                </calendar>
            </field>
        </record>

        <!-- Menu -->
        <menuitem id="menu_appointment" name="Appointments"
                  parent="reception" action="action_appointment" sequence="2"/>

    </data>
</odoo>
